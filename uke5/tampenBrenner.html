<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <style>
        div {
            width: 500px;
            height: 500px;
            background-color: rgb(255, 255, 255);
            border: solid 1px grey;
        }

        #done {
            width: 5px;
            height: 5px;
            position: absolute;
            background-color: black;
        }

    </style>

    <div id="div1">
        <div hidden id="done"></div>
        <img id="img" hidden src="./images/lit.jpg">
    </div>
    <button onclick="onClickgetPoint()">Trykk meg for ett hemmelig punkt</button>

    <script>
        let xPos;
        let yPos;
        let closenessX = 255;
        let closenessY = 255;
        let div1 = document.getElementById('div1');
        let doneDiv = document.getElementById('done');
        let img = document.getElementById('img');
        function mouseMove(event) {
            let mouseCoords = getMousePos(event);
            if (mouseCoords.x >= xPos - 3 && mouseCoords.x <= xPos + 3 && mouseCoords.y >= yPos - 3 && mouseCoords.y <= yPos + 3) {
                div1.style.backgroundColor = "white";
                div1.onmousemove = "";
                doneDiv.style.top = yPos + "px";
                doneDiv.style.left = xPos + "px";
                doneDiv.hidden = false;
                img.hidden = false;
                alert('Du klarte det!');
                return;

            }


            closenessX = 255 - Math.abs(mouseCoords.x - xPos);
            closenessY = 255 - Math.abs(mouseCoords.y - yPos);

            div1.style.backgroundColor = "rgb(" + (closenessX + closenessY) / 2 + " , 0 , 0)";

        }


        function getMousePos(e) {
            return { x: e.clientX, y: e.clientY };
        }


        function getRandomNr() {
            return Math.floor(Math.random() * 485 + 15);
        }


        function onClickgetPoint() {

            xPos = getRandomNr();
            yPos = getRandomNr();
            console.log(xPos);
            console.log(yPos);
            div1.onmousemove = mouseMove;
            doneDiv.hidden = true;


        }
    </script>

</body>

</html>