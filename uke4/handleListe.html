<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        img {
            cursor: pointer;
        }

        table,
        tr,
        td,
        th {
            border: 1px solid lightgray;
            border-collapse: collapse;
        }

        td,
        th {
            padding: 4px;
        }

        th {
            background-color: darkblue;
            border: 1px solid darkblue;
            color: white;
        }

        tr:nth-child(even) {
            background: antiquewhite;
        }
    </style>
</head>

<body>





    <div id="app">

    </div>

    <script>

        //Model
        let shoppingCart = [];
        let myObjects = [{
            Name: "avocado",
            Price: 30,
        },
        {
            Name: "lime",
            Price: 10,
        },
        {
            Name: "pineapple",
            Price: 50,
        }];

        let avocado = myObjects[0];
        let lime = myObjects[1];
        let pineapple = myObjects[2];

        function pushToShoppingCart(fruitObject) {
            shoppingCart.push({ editMode: false, fruit: fruitObject });

        }

        function clearItemsModel() {
            shoppingCart.length = 0;
        }
        //View

        let appObject = document.getElementById('app');

        function showItems() {
            appObject.innerHTML = /*HTML*/ `
                <img onclick="showShoppingCartOnclick()" src="../uke3/images/shoppingCart.png " alt="">
                <img onclick="itemOnclick(avocado)" src="../uke3/images/avocado.jpg " alt="">
                <img onclick="itemOnclick(lime)" src="../uke3/images/lime.jpg " alt="">
                <img onclick="itemOnclick(pineapple)" src="../uke3/images/pineapple.jpg " alt="">
                <div id="spanId"></div>
                <button onclick="onClickClearItems()">Clear Items</button>
                `;

        }


        function showShoppingCartOnclick() {

            if (shoppingCart.length == 0)
                return;
            appObject.innerHTML = "Du vil kj√∏pe:";
            appObject.innerHTML += /*HTML*/ `
            <table id="shoppingCartTable">
            

            </table>
            
            `;
            shoppingCartTableObject = document.getElementById('shoppingCartTable')
            html = `
                 <tr>
                    <th>
                        Varenavn
                    </th>
                    <th>                       
                        Pris
                    </th>
                    <th>
                        Funksjoner
                    </th>
                </tr>
            `;


            for (let i = 0; i < shoppingCart.length; i++) {
                html += createHtmlRow(i);
            }
            shoppingCartTableObject.innerHTML += html;
            appObject.innerHTML += `<button onclick="showItems()">Tilbake</button>`;


        }

        function createHtmlRow(index) {
            if (!shoppingCart[index].editMode)
                return /*HTML*/ `           
                <tr>
                    
                    <td>
                    ${shoppingCart[index].fruit.Name}
                    </td>
                    <td>
                    ${shoppingCart[index].fruit.Price}
                    </td>
                    <td>
                        <button onclick="onClickEditItem(index)">Edit</button>
                    </td>
                </tr>
        `;
  


        }



        //Controller
        showItems();
        function onClickEditItem(index) {
            shoppingCart[index].editMode = true;
            showShoppingCartOnclick();
        }

        function onClickClearItems() {
            clearItemsModel();
            showItems();
        }

        function itemOnclick(fruitObject) {
            pushToShoppingCart(fruitObject);
        }

    </script>
</body>

</html>